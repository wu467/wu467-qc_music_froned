<template>
        <article class="message is-success">
            <div class="message-header">
                <p>ğŸ§˜ ä¸ªäººä¿¡æ¯</p>
            </div>
            <div class="section">
                <!-- å­˜åœ¨ç”¨æˆ·cookieï¼Œæ˜¾ç¤ºç”¨æˆ·ä¸ªäººä¿¡æ¯ -->
                <div v-if="!this.infoVisible">
                    <el-avatar shape="square" :size="80" :src="url"></el-avatar>
                    <div class="username">
                        <span>{{this.userCookie}}</span>
                        <p><span>æ”¶è—æ­Œæ›²ï¼š{{this.$store.state.songCount}}é¦–</span></p>
                        <p>
                            <router-link :to="'/user/resPassword'" target='_blank' style="text-decoration: none">
                                 <a style="text-decoration: none">ä¿®æ”¹å¯†ç </a>
                            </router-link>
                            <span v-html="'&nbsp;'"/><span v-html="'&nbsp;'"/><span v-html="'&nbsp;'"/>                              
                            <a href="/back/user/signOut" style="text-decoration: none">é€€å‡ºç™»å½•</a>
                        </p>
                    </div>
                </div>

                <!-- ä¸å­˜åœ¨ï¼Œæ˜¾ç¤ºç™»é™†ä¸æ³¨å†ŒæŒ‰é’® -->
                <div v-if="this.infoVisible" class="btn">
                    <!-- è·³è½¬åˆ°ç™»å½•é¡µé¢ -->
                    <router-link :to="'/Login'" target='_blank' style="text-decoration: none">
                        <b-button  size="is-medium" type="is-success" outlined>ğŸ’¡ ç™»é™†</b-button>
                    </router-link>
                    <span v-html="'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'"/>   <!-- è§£å†³å ä½ç¬¦åœ¨vueä¸­æ— æ•ˆçš„æ–¹æ³• -->
                    <!-- è·³è½¬åˆ°æ³¨å†Œè·¯ç”± -->
                    <router-link :to="'/Register'" target='_blank' style="text-decoration: none">
                        <b-button  size="is-medium" type="is-danger" outlined>ğŸ‰æ³¨å†Œ</b-button>
                    </router-link>
                </div>
            </div>
        </article>
</template>

<script>
import {getCookie} from '@/utils/auth'

export default ({
    name: 'DailyLyrics',
    data() {
        return {
            userCookie: '',  //ç”¨æˆ·å
            infoVisible: true,  //ä¿¡æ¯æ˜¯å¦å¯è§
            url: 'https://thirdqq.qlogo.cn/g?b=sdk&k=BicK8wRNSiaxVuUxSDSkkH9A&s=140&t=1617896099'
        }
    },
    beforeMount() {
        // è¯¥ç»„ä»¶åœ¨åˆ›å»ºå®Œå…ˆè¿›è¡Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ç”¨æˆ·cookieï¼Œå¦‚æœå­˜åœ¨åˆ™è¯¥ç»„ä»¶æ˜¾ç¤ºç”¨æˆ·åŸºæœ¬ä¿¡æ¯ï¼Œä¸å­˜åœ¨åˆ™æ˜¾ç¤ºç™»å½•æ³¨å†ŒæŒ‰é’®
        const cookie = getCookie('username');
        this.userCookie = cookie
        // æ ¹æ®è·å–çš„cookieæ˜¯å¦ä¸ºç©ºï¼Œinfomationç»„ä»¶æ˜¾ç¤ºä¸åŒçš„å†…å®¹
        if(cookie != null){
            console.log("ä¸ä¸ºç©º")
            this.infoVisible = false;
        } else {
            console.log("cookieæ˜¯ç©ºçš„")
            this.infoVisible = true;
        }
    },
    methods: {

    }
})
</script>

<style scoped>

    .section{
        height: 115px;
        width: 300px;
        padding: 20px;
        margin: 0%;
    }
    .username{
        margin-top: -80px;
        margin-left: 100px;
    }
    .btn {
        margin-left: 15px;
        margin-top: 8px;
    }

</style>
